<canvas #canvas class="background-canvas" id="canvas"></canvas>
<div #mainContent class="content-wrapper">
  <ng-container *ngIf="user$ | async as user; else loggedOut">
    <!-- KullanÄ±cÄ± KarÅŸÄ±lama -->
    <div class="welcome">
      <h1>HoÅŸ geldin, {{ user.displayName ? (user.displayName | uppercase) : user.email }}!</h1>
      <button (click)="logout()">Ã‡Ä±kÄ±ÅŸ Yap</button>
      <button (click)="userUpdate()">Profili GÃ¼ncelle</button>
    </div>
    <section class="horoscope">
      <h2>GÃ¼nlÃ¼k BurÃ§ Yorumun</h2>
      <p *ngIf="horoscope$ | async as text; else loading">{{ text }}</p>
      <ng-template #loading><em>YÃ¼kleniyorâ€¦</em></ng-template>
    </section>
    <section class="horoscope">
      <button (click)="showBirthChart()">
        DoÄŸum HaritamÄ± GÃ¶rÃ¼ntÃ¼le
      </button>
      <button (click)="showStartMap()">
        YÄ±ldÄ±z HaritamÄ± GÃ¶rÃ¼ntÃ¼le
      </button>
      <button (click)="showZodiacMatch()">
        AÅŸk Uyumun
      </button>
      <button (click)="showNumerology()">
        Numaroloji
      </button>
    </section>
    <section class="blogs">
      <div class="cards">
        <div *ngFor="let b of blogs$ | async" class="astro-card">
          <img class="card-img" [src]="b.imageUrl || 'assets/default.jpg'" alt="{{ b.title }}" />

          <div class="card-body">
            <h3 class="card-title">{{ b.title }}</h3>
            <p class="card-snippet">{{ b.content | slice:0:80 }}...</p>
            <div class="card-footer">
              <time class="card-date">{{ b.createdAt | date:'shortDate' }}</time>
              <button color="accent" class="card-button" [routerLink]="['/blogs', b.id]">
                DevamÄ±nÄ± GÃ¶r
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>
  </ng-container>

  <ng-template #loggedOut>
    <div class="logged-out-wrapper">
      <div class="astrology-loggedout">
        <h2>ğŸ”® GiriÅŸ Gerekiyor</h2>
        <p>Devam etmek iÃ§in lÃ¼tfen giriÅŸ yap veya kayÄ±t ol.</p>
        <ul class="action-list">
          <li><a routerLink="/login" class="neon-link">GiriÅŸ Yap</a></li>
          <li><a routerLink="/register" class="neon-link">KayÄ±t Ol</a></li>
        </ul>
      </div>
    </div>
  </ng-template>
</div>
<div #numerologyContent class="content-wrapper" style="display: none;">
  <div class="welcome">
    <h1>Numeroloji Analizi</h1>
    <button (click)="ShowMainContent()"><</button>
  </div>
  <br>
  <section class="horoscope">
    <p class="numerology-card-snippet">Bir kiÅŸinin hayatÄ± isminin yazÄ±lÄ±ÅŸÄ±ndan tahmin edilebilir. Mantra Shastra'dan,
      alfabenin titreÅŸim frekansÄ±nÄ± kullanÄ±r.</p>
    <br>
    <h3 class="numerology-card-title" style="text-align: start;">ğŸ¤” Numeroloji Nedir?</h3>
    <p class="numerology-card-snippet" style="text-align: start;">Ã–zetle, her erkek veya kadÄ±n bir SayÄ± ile temsil
      edilir (Ã§Ã¼nkÃ¼ belirli bir gÃ¼n,
      ay ve yÄ±lda doÄŸmuÅŸtur) ve ayrÄ±ca isimlerine ait harflerle tanÄ±mlanÄ±r.

      Bu sastralara gÃ¶re insan bir Yantra'dÄ±r ve ismi bir Mantra'dÄ±r. Olumlu sonuÃ§lar ancak ikisi de birbirleriyle aynÄ±
      fikirdeyse elde edilebilir ve herhangi bir anlaÅŸmazlÄ±k onlara zarar verecektir. Bu, bu bilimin temel temelidir.
    </p>
  </section>
  <section class="horoscope">
    <form [formGroup]="f" (ngSubmit)="calculate()">

      <mat-form-field appearance="fill" class="numerology-w100">
        <mat-label>Ad Soyad</mat-label>
        <input matInput formControlName="fullName" placeholder="TAM ADINIZ">
      </mat-form-field>

      <mat-form-field appearance="fill" class="numerology-w100">
        <mat-label>DoÄŸum Tarihi</mat-label>
        <input matInput formControlName="birthDate" type="date">
      </mat-form-field>

      <button mat-raised-button style="background-color: transparent;" class="numerology-neon-button"
        [disabled]="f.invalid">
        Hesapla
      </button>
    </form>
  </section>

  <div *ngIf="result" class="numerology-cards numerology-results">
    <div class="numerology-astro-card">
      <h3 class="numerology-card-title">YaÅŸam Yolu: {{ result.lifePath }}</h3>
      <p class="numerology-card-snippet">{{ result.interpretation.lifePath }}</p>
    </div>
    <div class="numerology-astro-card">
      <h3 class="numerology-card-title">Ä°fade: {{ result.expression }}</h3>
      <p class="numerology-card-snippet">{{ result.interpretation.expression }}</p>
    </div>
    <div class="numerology-astro-card">
      <h3 class="numerology-card-title">Ruh Arzusu: {{ result.soulUrge }}</h3>
      <p class="numerology-card-snippet">{{ result.interpretation.soulUrge }}</p>
    </div>
    <div class="numerology-astro-card">
      <h3 class="numerology-card-title">KiÅŸilik: {{ result.personality }}</h3>
      <p class="numerology-card-snippet">{{ result.interpretation.personality }}</p>
    </div>
  </div>
  <br>
  <br>
</div>
<div #birthChartContent class="content-wrapper" style="display: none;">
  <div class="welcome">
    <h1>DoÄŸum HaritasÄ±</h1>
    <button (click)="ShowMainContent()"><</button>
  </div>
  <section class="horoscope">
    <ng-container *ngIf="loading; else showChart">
      YÃ¼kleniyorâ€¦
    </ng-container>

    <ng-template #showChart>
      <div [innerHTML]="birthChartHtml"></div>
    </ng-template>
  </section>
</div>